<div class="container cf">
  <div class="page-header">
    <h1>
      <kds-icon-delivery size="xl"></kds-icon-delivery> Cars Listing page
    </h1>
  </div>
  <div class="row">
    <div class="col-md-12">
      <p-table #dt [value]="(page | async)?.data.cars" [rows]="paginatorOptions.itemsPerPage" [paginator]="true"
        [lazy]="true" [first]="first" [emptymessage]="'No records found.'" (onSort)="_sortHandler($event)">
        <ng-template pTemplate="header">
          <tr>
            <th [pSortableColumn]="'make'">
              Make
              <kds-icon-sort *ngIf="!_isFieldSorted('make')"></kds-icon-sort>
              <kds-icon-up-arrow *ngIf="_isFieldSorted('make') && _isAscendingSortOrder('make')"></kds-icon-up-arrow>
              <kds-icon-down-arrow *ngIf="_isFieldSorted('make') && !_isAscendingSortOrder('make')">
              </kds-icon-down-arrow>
            </th>
            <th [pSortableColumn]="'model'">Model
              <kds-icon-sort *ngIf="!_isFieldSorted('model')"></kds-icon-sort>
              <kds-icon-up-arrow *ngIf="_isFieldSorted('model') && _isAscendingSortOrder('model')"></kds-icon-up-arrow>
              <kds-icon-down-arrow *ngIf="_isFieldSorted('model') && !_isAscendingSortOrder('model')">
              </kds-icon-down-arrow>
            </th>
            <th [pSortableColumn]="'color'">Color
              <kds-icon-sort *ngIf="!_isFieldSorted('color')"></kds-icon-sort>
              <kds-icon-up-arrow *ngIf="_isFieldSorted('color') && _isAscendingSortOrder('color')"></kds-icon-up-arrow>
              <kds-icon-down-arrow *ngIf="_isFieldSorted('color') && !_isAscendingSortOrder('color')">
              </kds-icon-down-arrow>
            </th>
            <th [pSortableColumn]="'year'">Year
              <kds-icon-sort *ngIf="!_isFieldSorted('year')"></kds-icon-sort>
              <kds-icon-up-arrow *ngIf="_isFieldSorted('year') && _isAscendingSortOrder('year')"></kds-icon-up-arrow>
              <kds-icon-down-arrow *ngIf="_isFieldSorted('year') && !_isAscendingSortOrder('year')">
              </kds-icon-down-arrow>
            </th>
            <th [pSortableColumn]="'vin'">VIN
              <kds-icon-sort *ngIf="!_isFieldSorted('vin')"></kds-icon-sort>
              <kds-icon-up-arrow *ngIf="_isFieldSorted('vin') && _isAscendingSortOrder('vin')"></kds-icon-up-arrow>
              <kds-icon-down-arrow *ngIf="_isFieldSorted('vin') && !_isAscendingSortOrder('vin')">
              </kds-icon-down-arrow>
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-car>
          <tr class="ers-data-row">
            <td>{{car['make']}}</td>
            <td>{{car['model']}}</td>
            <td>{{car['color']}}</td>
            <td>{{car['year']}}</td>
            <td>{{car['vin']}}</td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage" let-columns>
          <tr>
            <td colspan="5">
              No records found
            </td>
          </tr>
        </ng-template>
      </p-table>
      <ers-paginator class="paginator-bottom" [currentPage]="1" [items]="(page | async)?.data.cars"
        [totalItems]="(page | async)?.meta.totalElements || 1" [itemsPerPageList]="paginatorOptions.itemsPerPageList"
        [itemsPerPageDropdown]="paginatorOptions.itemsPerPageDropdown" [itemsPerPage]="paginatorOptions.itemsPerPage"
        [itemsPerPageList]="paginatorOptions.itemsPerPageList" [displayTotalItems]="paginatorOptions.displayTotalItems"
        [displayItemsPerPage]="paginatorOptions.displayItemsPerPage" (pageChanged)="_handlePageChange($event)">
      </ers-paginator>
    </div>
  </div>
